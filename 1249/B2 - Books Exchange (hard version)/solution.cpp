#include<bits/stdc++.h>using namespace std;typedef long long ll;void f(ll n,vector<ll>&a){    for(ll i=0;i<n;i++)cin>>a[i];} void solve(){    ll n;    cin>>n;    vector<ll>p(n+1);    for (ll i = 1; i <=n; i++)cin>>p[i];     vector<ll>vis(n+1),ans(n+1);    for (ll i = 1; i <=n; i++)    {        if(!vis[i]){            vector<ll>cycle;            ll curr=i;            while (!vis[curr])            {                vis[curr]=1;                cycle.push_back(curr);                curr=p[curr];            }            ll len=cycle.size();            for(ll node:cycle)ans[node]=len;        }    }    for(ll i=1;i<=n;i++)cout<<ans[i]<<" ";    cout<<"\n";    } int main(){ll t;cin>>t;while (t--){    solve();}     return 0;}