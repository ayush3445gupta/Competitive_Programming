#include<bits/stdc++.h>using namespace std;typedef long long ll;void f(ll n,vector<ll>&a){    for(ll i=0;i<n;i++)cin>>a[i];}void solve(){    ll n,k;    cin>>n>>k;    vector<ll>fr(n),h(n);    f(n,fr),f(n,h);    // conditions are     // 1-> count apples     // 2-> check h[i]%h[i+1]==0     // stopping condition    // 1-> if apples > k shrink from left left+1    //  2-> else left=right     ll left=0,right=0;    ll cnt=0,best_len=0;    while (right<n)    {        if(right!=n-1){            if(h[right]%h[right+1]==0)cnt+=fr[right];            else{                if(cnt+fr[right]>k)best_len=max(best_len,right-left);                else best_len=max(best_len,right-left+1);                left=right+1;                cnt=0;            }        }        else cnt+=fr[right];                while (left<=right && cnt>k)        {            cnt-=fr[left];            left++;        }        best_len=max(best_len,right-left+1);        right++;    }    cout<<best_len<<'\n';    } int main(){ll t;cin>>t;while (t--){    solve();}     return 0;}